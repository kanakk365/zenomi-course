<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Emotional Regulation in Teens – Pediatric Residents</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f7fb;
    }
    header {
      background: #243b6b;
      color: white;
      padding: 16px 24px;
    }
    h1 {
      margin: 0;
      font-size: 24px;
    }
    #sub {
      font-size: 14px;
      opacity: 0.8;
    }
    #container {
      display: flex;
      min-height: calc(100vh - 60px);
    }
    #sidebar {
      width: 260px;
      background: #ffffff;
      border-right: 1px solid #dde3f0;
      padding: 16px;
      box-sizing: border-box;
    }
    #sidebar h2 {
      font-size: 16px;
      margin-top: 0;
    }
    .chapter-link {
      padding: 8px 10px;
      margin-bottom: 6px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      border: 1px solid transparent;
      transition: background 0.3s ease, transform 0.2s ease;
    }
    .chapter-link:hover {
      background: #eef3ff;
      transform: translateX(2px);
    }
    .chapter-link.active {
      background: #243b6b;
      color: white;
      border-color: #1b2c4f;
    }
    #content {
      flex: 1;
      padding: 24px;
      box-sizing: border-box;
      position: relative;
      overflow: hidden;
    }
    .chapter {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      opacity: 0;
      transform: translateX(20px);
      transition: opacity 0.5s ease, transform 0.5s ease;
      display: none;
    }
    .chapter.active {
      display: block;
      opacity: 1;
      transform: translateX(0);
    }
    h2 {
      margin-top: 0;
      color: #243b6b;
    }
    .card {
      background: #ffffff;
      border-radius: 10px;
      padding: 16px 20px;
      margin-bottom: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    ul {
      padding-left: 20px;
    }
    .nav-buttons {
      margin-top: 12px;
      display: flex;
      justify-content: space-between;
    }
    button {
      padding: 8px 14px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-size: 14px;
    }
    .btn-primary {
      background: #243b6b;
      color: white;
    }
    .btn-secondary {
      background: #e0e5f2;
      color: #243b6b;
    }
    .btn-primary:hover {
      opacity: 0.9;
    }
    .quiz-question {
      margin-bottom: 12px;
    }
    .quiz-question p {
      margin: 0 0 4px 0;
      font-weight: bold;
      color: #333;
    }
    .feedback {
      margin-top: 8px;
      font-size: 13px;
    }
    .feedback.ok {
      color: #1c7c30;
    }
    .feedback.error {
      color: #b3261e;
    }
    #module-summary {
      font-size: 15px;
    }
    #score-display {
      font-weight: bold;
      color: #243b6b;
    }
  </style>
  <script>
    // Minimal SCORM 1.2 helper
    var API = null;
    var scormInitialized = false;

    function findAPI(win) {
      var nFindAPITries = 0;
      while ((win.API == null) && (nFindAPITries < 7)) {
        nFindAPITries++;
        if (win.parent != null && win.parent != win) {
          win = win.parent;
        } else {
          break;
        }
      }
      return win.API;
    }

    function getAPIHandle() {
      if (API == null) {
        API = findAPI(window);
      }
      return API;
    }

    function initSCORM() {
      var api = getAPIHandle();
      if (api && !scormInitialized) {
        var result = api.LMSInitialize("");
        if (result == "true") {
          scormInitialized = true;
        }
      }
    }

    function finishSCORM() {
      var api = getAPIHandle();
      if (api && scormInitialized) {
        api.LMSFinish("");
      }
    }

    function setSCORMValue(element, value) {
      var api = getAPIHandle();
      if (api && scormInitialized) {
        api.LMSSetValue(element, value);
        api.LMSCommit("");
      }
    }

    // Module logic
    var currentChapter = "ch1";
    var chapterScores = {
      ch1: null,
      ch2: null,
      ch3: null
    };

    function showChapter(id) {
      var chapters = document.querySelectorAll(".chapter");
      chapters.forEach(function(c) {
        c.classList.remove("active");
      });
      var links = document.querySelectorAll(".chapter-link");
      links.forEach(function(l) {
        l.classList.remove("active");
      });
      var target = document.getElementById(id);
      if (target) {
        target.classList.add("active");
        currentChapter = id;
      }
      var activeLink = document.querySelector('.chapter-link[data-target=\"' + id + '\"]');
      if (activeLink) activeLink.classList.add("active");
    }

    function nextChapter() {
      if (currentChapter === "ch1") showChapter("ch2");
      else if (currentChapter === "ch2") showChapter("ch3");
    }

    function prevChapter() {
      if (currentChapter === "ch3") showChapter("ch2");
      else if (currentChapter === "ch2") showChapter("ch1");
    }

    function gradeQuiz(chapterId) {
      var container = document.querySelector('#' + chapterId + ' .quiz');
      var questions = container.querySelectorAll(".quiz-question");
      var correctCount = 0;
      questions.forEach(function(q) {
        var correct = q.getAttribute("data-correct");
        var selected = q.querySelector("input[type=radio]:checked");
        if (selected && selected.value === correct) {
          correctCount++;
        }
      });

      var feedbackEl = container.querySelector(".feedback");
      if (feedbackEl) {
        if (correctCount === questions.length) {
          feedbackEl.textContent = "Great job! You answered all questions correctly (" + correctCount + "/" + questions.length + ").";
          feedbackEl.className = "feedback ok";
        } else {
          feedbackEl.textContent = "You scored " + correctCount + " out of " + questions.length + ". Review the content and try again.";
          feedbackEl.className = "feedback error";
        }
      }
      chapterScores[chapterId] = correctCount;
    }

    function finishModule() {
      var totalQuestions = 4 * 3; // 4 per chapter, 3 chapters
      var totalCorrect = 0;
      for (var key in chapterScores) {
        if (chapterScores[key] !== null) {
          totalCorrect += chapterScores[key];
        }
      }
      var percent = Math.round((totalCorrect / totalQuestions) * 100);
      if (isNaN(percent)) percent = 0;

      document.getElementById("score-display").textContent = percent + "% (" + totalCorrect + "/" + totalQuestions + " correct)";

      initSCORM();
      setSCORMValue("cmi.core.score.raw", String(percent));
      if (percent >= 70) {
        setSCORMValue("cmi.core.lesson_status", "completed");
        alert("Module completed! Your score: " + percent + "%");
      } else {
        setSCORMValue("cmi.core.lesson_status", "incomplete");
        alert("Module finished, but score is below 70%. Your score: " + percent + "%");
      }
    }

    window.onload = function() {
      initSCORM();
      showChapter("ch1");
    };

    window.onunload = function() {
      finishSCORM();
    };
  </script>
</head>
<body>
<header>
  <h1>Emotional Regulation in Teens</h1>
  <div id="sub">Interactive Toolkit for Pediatric Residents (SCORM 1.2)</div>
</header>
<div id="container">
  <div id="sidebar">
    <h2>Chapters</h2>
    <div class="chapter-link active" data-target="ch1" onclick="showChapter('ch1')">1. Teen Brain & Emotional Regulation</div>
    <div class="chapter-link" data-target="ch2" onclick="showChapter('ch2')">2. R.A.I.S.E. Model & 5‑Minute Encounter</div>
    <div class="chapter-link" data-target="ch3" onclick="showChapter('ch3')">3. Parents, Red Flags & Cases</div>
    <hr>
    <button class="btn-primary" onclick="finishModule()">Finish Module & Send Score</button>
  </div>

  <div id="content">
    <!-- Chapter 1 -->
    <div class="chapter active" id="ch1">
      <h2>Chapter 1: The Teen Brain & Emotional Regulation</h2>
      <div class="card">
        <h3>Key Concepts</h3>
        <ul>
          <li>Adolescence is marked by a highly active limbic system and a still-maturing prefrontal cortex.</li>
          <li>This mismatch leads to intense emotions, risk-taking, and sensitivity to rewards and social feedback.</li>
          <li>Emotional regulation problems can present as irritability, mood swings, school problems, and conflict at home.</li>
          <li>Pediatricians are often the first professionals teens and families turn to for help.</li>
        </ul>
      </div>
      <div class="card">
        <h3>Clinical Relevance</h3>
        <ul>
          <li>Link emotional symptoms to developmental neurobiology when educating teens and caregivers.</li>
          <li>Normalize emotional intensity without dismissing distress.</li>
          <li>Use a curious, non-judgmental stance to invite honest sharing.</li>
        </ul>
      </div>

      <div class="card quiz">
        <h3>Quiz – Chapter 1 (4 questions)</h3>

        <div class="quiz-question" data-correct="b">
          <p>1. Which brain region is still maturing in adolescence and is central to planning and impulse control?</p>
          <label><input type="radio" name="ch1_q1" value="a"> Amygdala</label><br>
          <label><input type="radio" name="ch1_q1" value="b"> Prefrontal cortex</label><br>
          <label><input type="radio" name="ch1_q1" value="c"> Cerebellum</label><br>
          <label><input type="radio" name="ch1_q1" value="d"> Brainstem</label>
        </div>

        <div class="quiz-question" data-correct="c">
          <p>2. A key reason teens show strong emotional reactions is:</p>
          <label><input type="radio" name="ch1_q2" value="a"> Fully mature executive functioning</label><br>
          <label><input type="radio" name="ch1_q2" value="b"> Underactive limbic circuitry</label><br>
          <label><input type="radio" name="ch1_q2" value="c"> Heightened limbic activity with immature regulation systems</label><br>
          <label><input type="radio" name="ch1_q2" value="d"> Absence of social influence</label>
        </div>

        <div class="quiz-question" data-correct="a">
          <p>3. Emotional dysregulation in teens can commonly present as:</p>
          <label><input type="radio" name="ch1_q3" value="a"> Irritability and school conflict</label><br>
          <label><input type="radio" name="ch1_q3" value="b"> Only psychosis</label><br>
          <label><input type="radio" name="ch1_q3" value="c"> Strictly physical complaints without emotional symptoms</label><br>
          <label><input type="radio" name="ch1_q3" value="d"> None of the above</label>
        </div>

        <div class="quiz-question" data-correct="d">
          <p>4. When talking to families about teen emotional surges, it is MOST helpful to:</p>
          <label><input type="radio" name="ch1_q4" value="a"> Dismiss it as “just hormones, ignore it”</label><br>
          <label><input type="radio" name="ch1_q4" value="b"> Blame the parents’ parenting style only</label><br>
          <label><input type="radio" name="ch1_q4" value="c"> Avoid mentioning brain development</label><br>
          <label><input type="radio" name="ch1_q4" value="d"> Normalize emotions while explaining the developing brain</label>
        </div>

        <button class="btn-secondary" onclick="gradeQuiz('ch1')">Check Answers (Chapter 1)</button>
        <div class="feedback"></div>
      </div>

      <div class="nav-buttons">
        <span></span>
        <button class="btn-primary" onclick="nextChapter()">Next: Chapter 2 ▶</button>
      </div>
    </div>

    <!-- Chapter 2 -->
    <div class="chapter" id="ch2">
      <h2>Chapter 2: R.A.I.S.E. Model & the 5‑Minute Encounter</h2>
      <div class="card">
        <h3>The R.A.I.S.E. Model</h3>
        <ul>
          <li><strong>R – Recognize Triggers:</strong> Spot internal and external cues that precede emotional storms.</li>
          <li><strong>A – Anchor the Body:</strong> Use breath, grounding, and sensory input to calm the nervous system.</li>
          <li><strong>I – Interpret the Emotion:</strong> Name the feeling and link it to context (“It makes sense that…”).</li>
          <li><strong>S – Shift Thought/Behavior:</strong> Reframe, break tasks down, and choose a small effective action.</li>
          <li><strong>E – Engage Supports:</strong> Connect with trusted adults, peers, and healthy routines.</li>
        </ul>
      </div>
      <div class="card">
        <h3>The 5‑Minute Pediatric Encounter</h3>
        <ul>
          <li>Validate and normalize: “Many teens feel this way.”</li>
          <li>Name the emotion: “This sounds like overwhelm mixed with frustration.”</li>
          <li>Teach ONE concrete skill (e.g., box breathing, STOPP pause).</li>
          <li>Check lifestyle pillars: sleep, screens, stress, substance use.</li>
          <li>Set a micro-goal before the next visit.</li>
        </ul>
      </div>

      <div class="card quiz">
        <h3>Quiz – Chapter 2 (4 questions)</h3>

        <div class="quiz-question" data-correct="c">
          <p>1. In the R.A.I.S.E. model, “Anchor the Body” refers primarily to:</p>
          <label><input type="radio" name="ch2_q1" value="a"> Giving cognitive homework only</label><br>
          <label><input type="radio" name="ch2_q1" value="b"> Asking the teen to suppress emotion</label><br>
          <label><input type="radio" name="ch2_q1" value="c"> Using body-based strategies like breathing and grounding</label><br>
          <label><input type="radio" name="ch2_q1" value="d"> Encouraging more screen time to distract</label>
        </div>

        <div class="quiz-question" data-correct="b">
          <p>2. A key element of the 5‑Minute Encounter is:</p>
          <label><input type="radio" name="ch2_q2" value="a"> Completing a full CBT session</label><br>
          <label><input type="radio" name="ch2_q2" value="b"> Teaching a single, simple skill that can be practiced</label><br>
          <label><input type="radio" name="ch2_q2" value="c"> Avoiding discussion of emotions due to time limits</label><br>
          <label><input type="radio" name="ch2_q2" value="d"> Focusing only on lab results</label>
        </div>

        <div class="quiz-question" data-correct="d">
          <p>3. “Shift Thought/Behavior” could look like:</p>
          <label><input type="radio" name="ch2_q3" value="a"> Telling the teen to “just stop feeling this way”</label><br>
          <label><input type="radio" name="ch2_q3" value="b"> Encouraging them to think about the worst-case scenario</label><br>
          <label><input type="radio" name="ch2_q3" value="c"> Asking them to ignore all stressors</label><br>
          <label><input type="radio" name="ch2_q3" value="d"> Reframing the situation and choosing one manageable action</label>
        </div>

        <div class="quiz-question" data-correct="a">
          <p>4. When a teen shares distress, the BEST immediate step is to:</p>
          <label><input type="radio" name="ch2_q4" value="a"> Validate their feeling before problem-solving</label><br>
          <label><input type="radio" name="ch2_q4" value="b"> Correct their interpretation immediately</label><br>
          <label><input type="radio" name="ch2_q4" value="c"> Quickly change the topic to growth charts</label><br>
          <label><input type="radio" name="ch2_q4" value="d"> Ask them to keep emotions private</label>
        </div>

        <button class="btn-secondary" onclick="gradeQuiz('ch2')">Check Answers (Chapter 2)</button>
        <div class="feedback"></div>
      </div>

      <div class="nav-buttons">
        <button class="btn-secondary" onclick="prevChapter()">◀ Back to Chapter 1</button>
        <button class="btn-primary" onclick="nextChapter()">Next: Chapter 3 ▶</button>
      </div>
    </div>

    <!-- Chapter 3 -->
    <div class="chapter" id="ch3">
      <h2>Chapter 3: Parents, Red Flags & Case Applications</h2>
      <div class="card">
        <h3>Coaching Parents: The 3 C’s</h3>
        <ul>
          <li><strong>Calm:</strong> Regulate yourself first – tone, posture, pace.</li>
          <li><strong>Connect:</strong> Lead with empathy and curiosity, not advice.</li>
          <li><strong>Coach:</strong> Collaborate on problem-solving and skills practice.</li>
        </ul>
        <p><em>Example scripts:</em></p>
        <ul>
          <li>“I’m here. Tell me what feels hardest right now.”</li>
          <li>“Let’s both take three slow breaths, then we’ll figure it out.”</li>
          <li>“Do you want ideas, or do you want me to just listen?”</li>
        </ul>
      </div>
      <div class="card">
        <h3>Red Flags & When to Refer</h3>
        <ul>
          <li>Self-harm, suicidal ideation, or severe aggression.</li>
          <li>School refusal or sudden, marked academic decline.</li>
          <li>Substance use to cope with emotions.</li>
          <li>Persistent anhedonia, social withdrawal, or functional impairment.</li>
        </ul>
      </div>
      <div class="card">
        <h3>Case Snapshot</h3>
        <p><strong>Case:</strong> A 15‑year‑old presents with daily arguments at home, late‑night gaming, and falling grades.</p>
        <ul>
          <li>Use the 5‑Minute Encounter to validate, name emotions, check sleep/screens, and teach one skill.</li>
          <li>Coach parents on the 3 C’s and realistic expectations.</li>
          <li>Assess for comorbid anxiety, depression, or ADHD and consider referral if impairment is significant.</li>
        </ul>
      </div>

      <div class="card quiz">
        <h3>Quiz – Chapter 3 (4 questions)</h3>

        <div class="quiz-question" data-correct="c">
          <p>1. The FIRST step in the 3 C’s for parents is:</p>
          <label><input type="radio" name="ch3_q1" value="a"> Coach</label><br>
          <label><input type="radio" name="ch3_q1" value="b"> Correct</label><br>
          <label><input type="radio" name="ch3_q1" value="c"> Calm</label><br>
          <label><input type="radio" name="ch3_q1" value="d"> Critique</label>
        </div>

        <div class="quiz-question" data-correct="b">
          <p>2. A red flag that warrants urgent mental health evaluation is:</p>
          <label><input type="radio" name="ch3_q2" value="a"> Occasional irritability before exams</label><br>
          <label><input type="radio" name="ch3_q2" value="b"> Expressed suicidal ideation or self-harm behaviors</label><br>
          <label><input type="radio" name="ch3_q2" value="c"> Enjoying time alone to read</label><br>
          <label><input type="radio" name="ch3_q2" value="d"> Mild sibling arguments</label>
        </div>

        <div class="quiz-question" data-correct="d">
          <p>3. In the 15‑year‑old case with late‑night gaming and low grades, a key FIRST step is:</p>
          <label><input type="radio" name="ch3_q3" value="a"> Immediately remove all devices without discussion</label><br>
          <label><input type="radio" name="ch3_q3" value="b"> Focus solely on punishment</label><br>
          <label><input type="radio" name="ch3_q3" value="c"> Tell parents it is just a phase</label><br>
          <label><input type="radio" name="ch3_q3" value="d"> Explore sleep, stress, and emotions while validating the teen</label>
        </div>

        <div class="quiz-question" data-correct="a">
          <p>4. A helpful parent script that aligns with the 3 C’s is:</p>
          <label><input type="radio" name="ch3_q4" value="a"> “I’m here. Tell me what feels hardest right now.”</label><br>
          <label><input type="radio" name="ch3_q4" value="b"> “Stop overreacting, it’s not a big deal.”</label><br>
          <label><input type="radio" name="ch3_q4" value="c"> “Why can’t you be more like your sibling?”</label><br>
          <label><input type="radio" name="ch3_q4" value="d"> “I’ll handle everything; you don’t need to think.”</label>
        </div>

        <button class="btn-secondary" onclick="gradeQuiz('ch3')">Check Answers (Chapter 3)</button>
        <div class="feedback"></div>
      </div>

      <div class="card" id="module-summary">
        <h3>Module Summary & Score</h3>
        <p>When you are ready, click <strong>“Finish Module &amp; Send Score”</strong> in the left panel to send your score to the LMS.</p>
        <p>Your current calculated score: <span id="score-display">Not calculated yet</span></p>
      </div>

      <div class="nav-buttons">
        <button class="btn-secondary" onclick="prevChapter()">◀ Back to Chapter 2</button>
        <span></span>
      </div>
    </div>
  </div>
</div>
</body>
</html>
